(this["webpackJsonpstrava-github-like-graph"]=this["webpackJsonpstrava-github-like-graph"]||[]).push([[0],{180:function(e,t,a){e.exports={header:"style_header__MlSQ_",logoImage:"style_logoImage__1Hwfc"}},275:function(e,t,a){e.exports=a.p+"static/media/logo.52946ee0.png"},278:function(e,t,a){e.exports={welcomeMessage:"styles_welcomeMessage__1TKJu"}},282:function(e,t,a){e.exports={dataDigestion:"styles_dataDigestion__2SQFo"}},283:function(e,t,a){e.exports={node:"styles_node__1LXWE"}},284:function(e,t,a){e.exports={monthNode:"styles_monthNode__1qqTP"}},290:function(e,t,a){e.exports=a(590)},295:function(e,t,a){},324:function(e,t){},326:function(e,t){},356:function(e,t){},357:function(e,t){},422:function(e,t){},52:function(e,t,a){e.exports={container:"styles_container__3B2i6",graphContainer:"styles_graphContainer__24ldH",graph:"styles_graph__RRI0v",monthRunner:"styles_monthRunner__UAYNl",userInfoContainer:"styles_userInfoContainer__1hAKg",userAvatar:"styles_userAvatar__2Pi6L",userBasicInfo:"styles_userBasicInfo__1onZ9",userCity:"styles_userCity__LMxxX"}},590:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),s=a.n(c),o=(a(295),a(124)),i=a(61),l=a(38),u=a.n(l),m=a(66),f=a(183),h=a(101),p=a.n(h),v=null,d=null,g=null;function E(e){d=new p.a.client(e)}function _(){return v}function y(e){return b.apply(this,arguments)}function b(){return(b=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("code:",t),e.next=3,p.a.oauth.getToken(t);case 3:a=e.sent,n=a.access_token,r=a.athlete,console.log("access_token, athlete",n,r),v=r,E(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return(k=Object(m.a)(u.a.mark((function e(){var t,a,n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=50,a=Math.floor((new Date).getTime()/1e3),n=a-31536e3,r=1,c=[],s=[];case 6:return e.next=8,d.athlete.listActivities({before:a,after:n,page:r,per_page:t});case 8:c=e.sent,s=[].concat(Object(f.a)(s),Object(f.a)(c)),r++;case 11:if(c.length===t){e.next=6;break}case 12:g=N(s,a,n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,a){var n=function(e,t){var a=new Date(1e3*e);a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0);for(var n={};a.getTime()/1e3>t;a.setDate(a.getDate()-1))n[a.toLocaleString("sv").split(" ")[0]]={};return n}(t,a);return e.forEach((function(e){var t=n[e.start_date_local.split("T")[0]];t.activities||(t.activities=[],t.effortLevel=0),t.activities.push(e),t.effortLevel+=function(e){switch(e.type){case"Run":return x(e.distance,5e3,300);case"Ride":return x(e.distance,1e4,300);case"Walk":return x(e.distance,7500,300);default:return 0}}(e)})),n}function x(e,t,a){return 0===e?0:e<t-a?1:Math.floor((e+a)/t+1)}p.a.config({client_id:"33044",client_secret:"6983580288357d168b82ba26176b89055516ff81",redirect_uri:"https://manojvivek.github.io/strava-github-like-graph/auth-callback"});var j=a(24);function O(e){return r.a.createElement(j.a,{className:"theme-color align-center ".concat(e.className||""),type:"loading-3-quarters",spin:!0,style:{fontSize:"30px"}})}function A(e){var t=Object(i.f)();return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams(window.location.search),e.next=3,y(a.get("code"));case 3:t.push("/strava-github-like-graph");case 4:case"end":return e.stop()}}),e)})))()}),[t]),r.a.createElement(O,null)}function C(){return Object(n.useEffect)((function(){window.location=p.a.oauth.getRequestAccessURL({scope:"activity:read"})}),[]),r.a.createElement(O,null)}var S=a(3),D=a.n(S),M=a(180),L=a.n(M),I=a(275),T=a.n(I);function R(){return r.a.createElement("div",{className:D()(L.a.header)},r.a.createElement("img",{src:T.a,className:D()(L.a.logoImage),alt:"Strava-Github-Like-Graph"}))}var B=a(288),F=a(182),q=F.a.Step;function z(e){var t=e.step;return r.a.createElement(F.a,null,r.a.createElement(q,{status:t<2?"process":"finish",title:"Connect Strava",icon:r.a.createElement(j.a,{type:"user"})}),r.a.createElement(q,{status:2===t?"process":1===t?"wait":"finish",title:"Data Digestion",icon:r.a.createElement(j.a,{type:"experiment"})}),r.a.createElement(q,{status:3===t?"process":"wait",title:"Visualize",icon:r.a.createElement(j.a,{type:"crown"})}))}var W=a(50),H=a(287),J=a(278),P=a.n(J),U=W.a.Title,G=W.a.Text;function K(){var e=Object(i.f)();return r.a.createElement("div",{className:D()(P.a.welcomeMessage)},r.a.createElement(U,{level:3,className:"theme-color"},"Authorize"),r.a.createElement(G,{strong:!0,className:"height-200"},"App needs access to your Strava activies to show the graph, continue and authorize with your strava account to proceed."),r.a.createElement(H.a,{type:"primary",icon:"lock",className:"top-space-medium",onClick:function(){return e.push("init-auth")}},"Allow Strava Access"))}var Q=a(282),X=a.n(Q),V=W.a.Title;function Y(e){var t=e.done;return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t();case 3:case"end":return e.stop()}}),e)})))()}),[t]),r.a.createElement("div",{className:D()(X.a.dataDigestion)},r.a.createElement(V,{level:3,className:"theme-color"},"Negotiating your data with Strava.."),r.a.createElement(O,{className:"top-space-medium"}))}var Z=a(99),$=a(283),ee=a.n($),te={5:"#E34402",4:"#E96935",3:"#EE8F67",2:"#F4B49A",1:"#F9DACC"};function ae(e){var t=e.activities,a=e.effortLevel,n=e.day;return r.a.createElement(Z.a,{mouseLeaveDelay:0,mouseEnterDelay:.05,title:"".concat(t?"".concat(t.length," activit").concat(1===t.length?"y":"ies"," of ").concat(Math.round(t.reduce((function(e,t){return e+t.distance}),0)/1e3),"kms"):"No activities"," on ").concat(n)},r.a.createElement("div",{className:D()(ee.a.node),style:{backgroundColor:te[a]||"#efefef"}}))}var ne=a(285),re=a(284),ce=a.n(re),se=W.a.Text;function oe(e){var t=e.month;return r.a.createElement("div",{className:D()(ce.a.monthNode)},r.a.createElement(se,null,t))}var ie=a(52),le=a.n(ie),ue=W.a.Text;function me(e){var t=e.data,a=_(),n=Object.keys(t).reverse(),c=new Date(n[0]),s=Array.from(Array(12)).map((function(){var e=c.toLocaleString("default",{month:"short"});return c.setMonth(c.getMonth()+1),e})),o=r.a.useMemo((function(){return Object.keys(t).reduce((function(e,a){return e+(t[a].activities||[]).length}),0)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:D()(le.a.container,"top-space-medium")},r.a.createElement("div",{className:D()(le.a.userInfoContainer)},r.a.createElement(ne.a,{src:a.profile,className:D()(le.a.userAvatar)}),r.a.createElement("div",{className:D()(le.a.userBasicInfo)},r.a.createElement(ue,{strong:!0},"".concat(a.firstname," ").concat(a.lastname)),r.a.createElement(ue,{className:D()(le.a.userCity)},"".concat(a.city)))),r.a.createElement("div",null,r.a.createElement(ue,null,o," activities in the last year")),r.a.createElement("div",{className:D()(le.a.graphContainer)},r.a.createElement("div",{className:D()(le.a.monthRunner)},s.map((function(e){return r.a.createElement(oe,{month:e})}))),r.a.createElement("div",{className:D()(le.a.graph)},n.map((function(e){return r.a.createElement(ae,Object.assign({},t[e],{key:e,day:e}))}))))))}function fe(e){var t=_(),a=Object(n.useState)(null==t?1:2),c=Object(B.a)(a,2),s=c[0],o=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{step:s}),1===s&&r.a.createElement(K,null),2===s&&r.a.createElement(Y,{done:function(){return o(3)}}),3===s&&r.a.createElement(me,{data:g}))}var he=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null),r.a.createElement(o.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"".concat("/strava-github-like-graph","/auth-callback")},r.a.createElement(A,null)),r.a.createElement(i.a,{path:"".concat("/strava-github-like-graph","/init-auth")},r.a.createElement(C,null)),r.a.createElement(i.a,{path:"".concat("/strava-github-like-graph","/")},r.a.createElement(fe,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(595).a({dsn:"https://7ef33f9edba24b8aad31ad5801157c48@sentry.io/2201384"}),s.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[290,1,2]]]);
//# sourceMappingURL=main.da22581b.chunk.js.map