(this["webpackJsonpstrava-github-like-graph"]=this["webpackJsonpstrava-github-like-graph"]||[]).push([[0],{169:function(e,t,a){e.exports={header:"style_header__MlSQ_",logoImage:"style_logoImage__1Hwfc"}},264:function(e,t,a){e.exports=a.p+"static/media/logo.52946ee0.png"},267:function(e,t,a){e.exports={welcomeMessage:"styles_welcomeMessage__1TKJu"}},271:function(e,t,a){e.exports={dataDigestion:"styles_dataDigestion__2SQFo"}},272:function(e,t,a){e.exports={node:"styles_node__1LXWE"}},273:function(e,t,a){e.exports={monthNode:"styles_monthNode__1qqTP"}},277:function(e,t,a){e.exports=a(576)},282:function(e,t,a){},311:function(e,t){},313:function(e,t){},343:function(e,t){},344:function(e,t){},409:function(e,t){},576:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c),i=(a(282),a(114)),s=a(55),l=a(33),u=a.n(l),m=a(60),h=a(172),f=a(92),p=a.n(f),v=null,g=null,d=null;function E(e){g=new p.a.client(e)}function y(e){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("code:",t),e.next=3,p.a.oauth.getToken(t);case 3:a=e.sent,n=a.access_token,r=a.athlete,console.log("access_token, athlete",n,r),v=r,E(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return b.apply(this,arguments)}function b(){return(b=Object(m.a)(u.a.mark((function e(){var t,a,n,r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=50,a=Math.floor((new Date).getTime()/1e3),n=a-31536e3,r=1,c=[],o=[];case 6:return e.next=8,g.athlete.listActivities({before:a,after:n,page:r,per_page:t});case 8:c=e.sent,o=[].concat(Object(h.a)(o),Object(h.a)(c)),r++;case 11:if(c.length===t){e.next=6;break}case 12:d=k(o,a,n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,a){var n=function(e,t){var a=new Date(1e3*e);a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0);for(var n={};a.getTime()/1e3>t;a.setDate(a.getDate()-1))n[a.toISOString().split("T")[0]]={};return n}(t,a);return e.forEach((function(e){var t=n[e.start_date_local.split("T")[0]];t.activities||(t.activities=[],t.effortLevel=0),t.activities.push(e),t.effortLevel+=function(e){switch(e.type){case"Run":return N(e.distance,5e3,300);case"Ride":return N(e.distance,1e4,300);case"Walk":return N(e.distance,7500,300);default:return 0}}(e)})),n}function N(e,t,a){return 0===e?0:e<t-a?1:Math.floor((e+a)/t+1)}p.a.config({client_id:"33044",client_secret:"6983580288357d168b82ba26176b89055516ff81",redirect_uri:"https://manojvivek.github.io/strava-github-like-graph/auth-callback"});var x=a(23);function j(e){return r.a.createElement(x.a,{className:"theme-color align-center ".concat(e.className||""),type:"loading-3-quarters",spin:!0,style:{fontSize:"30px"}})}function O(e){var t=Object(s.f)();return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams(window.location.search),console.log("params, location.search",a,window.location.search),e.next=4,y(a.get("code"));case 4:t.push("/");case 5:case"end":return e.stop()}}),e)})))()}),[t]),r.a.createElement(j,null)}function S(){return Object(n.useEffect)((function(){window.location=p.a.oauth.getRequestAccessURL({scope:"activity:read"})}),[]),r.a.createElement(j,null)}var D=a(2),M=a.n(D),T=a(169),A=a.n(T),L=a(264),R=a.n(L);function C(){return r.a.createElement("div",{className:M()(A.a.header)},r.a.createElement("img",{src:R.a,className:M()(A.a.logoImage),alt:"Strava-Github-Like-Graph"}))}var F=a(275),I=a(171),B=I.a.Step;function U(e){var t=e.step;return r.a.createElement(I.a,null,r.a.createElement(B,{status:t<2?"process":"finish",title:"Connect Strava",icon:r.a.createElement(x.a,{type:"user"})}),r.a.createElement(B,{status:2===t?"process":1===t?"wait":"finish",title:"Data Digestion",icon:r.a.createElement(x.a,{type:"experiment"})}),r.a.createElement(B,{status:3===t?"process":"wait",title:"Visualize",icon:r.a.createElement(x.a,{type:"crown"})}))}var q=a(45),z=a(274),W=a(267),H=a.n(W),J=q.a.Title,P=q.a.Text;function G(){var e=Object(s.f)();return r.a.createElement("div",{className:M()(H.a.welcomeMessage)},r.a.createElement(J,{level:3,className:"theme-color"},"Authorize"),r.a.createElement(P,{strong:!0,className:"height-200"},"App needs access to your Strava activies to show the graph, continue and authorize with your strava account to proceed."),r.a.createElement(z.a,{type:"primary",icon:"lock",className:"top-space-medium",onClick:function(){return e.push("init-auth")}},"Allow Strava Access"))}var Q=a(271),K=a.n(Q),V=q.a.Title;function X(e){var t=e.done;return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t();case 3:case"end":return e.stop()}}),e)})))()}),[t]),r.a.createElement("div",{className:M()(K.a.dataDigestion)},r.a.createElement(V,{level:3,className:"theme-color"},"Negotiating your data with Strava.."),r.a.createElement(j,{className:"top-space-medium"}))}var Y=a(90),$=a(272),Z=a.n($),ee={5:"#E34402",4:"#E96935",3:"#EE8F67",2:"#F4B49A",1:"#F9DACC"};function te(e){var t=e.activities,a=e.effortLevel,n=e.day;return r.a.createElement(Y.a,{mouseLeaveDelay:0,mouseEnterDelay:.05,title:"".concat(t?"".concat(t.length," activit").concat(1===t.length?"y":"ies"," of ").concat(Math.round(t.reduce((function(e,t){return e+t.distance}),0)/1e3),"kms"):"No activities"," on ").concat(n)},r.a.createElement("div",{className:M()(Z.a.node),style:{backgroundColor:ee[a]||"#efefef"}}))}var ae=a(273),ne=a.n(ae),re=q.a.Text;function ce(e){var t=e.month;return r.a.createElement("div",{className:M()(ne.a.monthNode)},r.a.createElement(re,null,t))}var oe=a(93),ie=a.n(oe),se=q.a.Text;function le(e){var t=e.data,a=Object.keys(t).reverse(),n=new Date(a[0]),c=Array.from(Array(12)).map((function(){var e=n.toLocaleString("default",{month:"short"});return n.setMonth(n.getMonth()+1),e})),o=r.a.useMemo((function(){return Object.keys(t).reduce((function(e,a){return e+(t[a].activities||[]).length}),0)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:M()(ie.a.container,"top-space-medium")},r.a.createElement("div",null,r.a.createElement(se,null,o," activities in the last year")),r.a.createElement("div",{className:M()(ie.a.graphContainer)},r.a.createElement("div",{className:M()(ie.a.monthRunner)},c.map((function(e){return r.a.createElement(ce,{month:e})}))),r.a.createElement("div",{className:M()(ie.a.graph)},a.map((function(e){return r.a.createElement(te,Object.assign({},t[e],{key:e,day:e}))}))))))}function ue(e){var t=v,a=Object(n.useState)(null==t?1:2),c=Object(F.a)(a,2),o=c[0],i=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{step:o}),1===o&&r.a.createElement(G,null),2===o&&r.a.createElement(X,{done:function(){return i(3)}}),3===o&&r.a.createElement(le,{data:d}))}var me=function(){return console.log("process.env.PUBLIC_URL","/strava-github-like-graph"),r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement(i.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"".concat("/strava-github-like-graph","/auth-callback")},r.a.createElement(O,null)),r.a.createElement(s.a,{path:"".concat("/strava-github-like-graph","/init-auth")},r.a.createElement(S,null)),r.a.createElement(s.a,{path:"".concat("/strava-github-like-graph","/")},r.a.createElement(ue,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},93:function(e,t,a){e.exports={container:"styles_container__3B2i6",graphContainer:"styles_graphContainer__24ldH",graph:"styles_graph__RRI0v",monthRunner:"styles_monthRunner__UAYNl"}}},[[277,1,2]]]);
//# sourceMappingURL=main.58bd6820.chunk.js.map