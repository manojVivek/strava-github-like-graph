(this["webpackJsonpstrava-github-like-graph"]=this["webpackJsonpstrava-github-like-graph"]||[]).push([[0],{126:function(e,t,a){e.exports={welcomeMessage:"styles_welcomeMessage__1TKJu",sampleGraph:"styles_sampleGraph__2t_wQ",connectText:"styles_connectText__1YX2X"}},128:function(e,t,a){e.exports={legend:"styles_legend__17u3L",labelText:"styles_labelText__2u9Z9"}},182:function(e,t,a){e.exports={header:"style_header__MlSQ_",logoImage:"style_logoImage__1Hwfc"}},184:function(e,t,a){e.exports={monthNode:"styles_monthNode__1qqTP",monthText:"styles_monthText__2UjKw"}},185:function(e,t,a){e.exports={day:"styles_day__2MEFe",dayText:"styles_dayText__3nYRt"}},279:function(e,t,a){e.exports=a.p+"static/media/logo.52946ee0.png"},285:function(e,t,a){e.exports={dataDigestion:"styles_dataDigestion__2SQFo"}},286:function(e,t,a){e.exports={node:"styles_node__1LXWE"}},292:function(e,t,a){e.exports=a(592)},297:function(e,t,a){},326:function(e,t){},328:function(e,t){},358:function(e,t){},359:function(e,t){},38:function(e,t,a){e.exports={container:"styles_container__3B2i6",graphContainer:"styles_graphContainer__24ldH",graphSection:"styles_graphSection__1023A",graph:"styles_graph__RRI0v",dayRunner:"styles_dayRunner__24Is6",monthRunner:"styles_monthRunner__UAYNl",userInfoContainer:"styles_userInfoContainer__1hAKg",userAvatar:"styles_userAvatar__2Pi6L",userBasicInfo:"styles_userBasicInfo__1onZ9",userCity:"styles_userCity__LMxxX"}},424:function(e,t){},592:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),s=a.n(c),l=(a(297),a(124)),o=a(61),i=a(40),u=a.n(i),m=a(66),f=a(187),p=a(101),h=a.n(p),v=null,d=null,g=null;function E(e){d=new h.a.client(e)}function _(){return v}function y(e){return b.apply(this,arguments)}function b(){return(b=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("code:",t),e.next=3,h.a.oauth.getToken(t);case 3:a=e.sent,n=a.access_token,r=a.athlete,console.log("access_token, athlete",n,r),v=r,E(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(u.a.mark((function e(){var t,a,n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=50,a=Math.floor((new Date).getTime()/1e3),n=N(a-31536e3),r=1,c=[],s=[];case 7:return e.next=9,d.athlete.listActivities({before:a,after:n,page:r,per_page:t});case 9:c=e.sent,s=[].concat(Object(f.a)(s),Object(f.a)(c)),r++;case 12:if(c.length===t){e.next=7;break}case 13:g=k(s,a,n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){for(var t=new Date(1e3*e);0!==t.getDay();)t.setDate(t.getDate()-1);return t.getTime()/1e3}function k(e,t,a){var n=function(e,t){var a=new Date(1e3*e);D(a);var n={},r=new Date(1e3*t);for(D(r);a.getTime()>=r.getTime();a.setDate(a.getDate()-1))n[a.toLocaleString("sv").split(" ")[0]]={};return n}(t,a);return e.forEach((function(e){var t=n[e.start_date_local.split("T")[0]];t||(t={},n[e.start_date_local.split("T")[0]]=t),t.activities||(t.activities=[],t.effortLevel=0),t.activities.push(e),t.effortLevel+=function(e){switch(e.type){case"Run":return T(e.distance,5e3,300);case"Ride":return T(e.distance,1e4,300);case"Walk":return T(e.distance,7500,300);default:return 1.5}}(e)})),n}function T(e,t,a){return 0===e?0:e<t-a?1:Math.floor((e+a)/t+1)}function D(e){e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0)}h.a.config({client_id:"33044",client_secret:"6983580288357d168b82ba26176b89055516ff81",redirect_uri:"https://manojvivek.github.io/strava-github-like-graph/auth-callback"});var I=a(24);function L(e){return r.a.createElement(I.a,{className:"theme-color align-center ".concat(e.className||""),type:"loading-3-quarters",spin:!0,style:{fontSize:"30px"}})}function j(e){var t=Object(o.f)();return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams(window.location.search),e.next=3,y(a.get("code"));case 3:t.push("/strava-github-like-graph");case 4:case"end":return e.stop()}}),e)})))()}),[t]),r.a.createElement(L,null)}function S(){return Object(n.useEffect)((function(){window.location=h.a.oauth.getRequestAccessURL({scope:"activity:read"})}),[]),r.a.createElement(L,null)}var C=a(3),M=a.n(C),O=a(182),R=a.n(O),A=a(279),H=a.n(A);function F(){return r.a.createElement("div",{className:M()(R.a.header)},r.a.createElement("img",{src:H.a,className:M()(R.a.logoImage),alt:"Strava-Github-Like-Graph"}))}var B=a(290),W=a(186),G=W.a.Step;function q(e){var t=e.step;return r.a.createElement(W.a,null,r.a.createElement(G,{status:t<2?"process":"finish",title:"Connect Strava",icon:r.a.createElement(I.a,{type:"user"})}),r.a.createElement(G,{status:2===t?"process":1===t?"wait":"finish",title:"Data Digestion",icon:r.a.createElement(I.a,{type:"experiment"})}),r.a.createElement(G,{status:3===t?"process":"wait",title:"Visualize",icon:r.a.createElement(I.a,{type:"crown"})}))}var U=a(33),X=a(289),J=a(126),K=a.n(J),P=U.a.Title,Q=U.a.Text;function Y(){var e=Object(o.f)();return r.a.createElement("div",{className:M()(K.a.welcomeMessage)},r.a.createElement(P,{level:3,className:"theme-color text-center"},"Welcome!"," ",r.a.createElement("span",{role:"img","aria-label":"party"},"\ud83c\udf89"),r.a.createElement("br",null),"Here is my Strava activities graph for last year:"),r.a.createElement("img",{alt:"Sample graph",className:M()(K.a.sampleGraph),src:"".concat("/strava-github-like-graph","/sample-graph.png")}),r.a.createElement(Q,{strong:!0,className:M()("height-200",K.a.connectText)},"Curious to see how yours look? ",r.a.createElement("br",null),"It is just a click away, connect your Strava account below to see yours!"),r.a.createElement(X.a,{type:"primary",icon:"lock",className:"top-space-medium",onClick:function(){return e.push("init-auth")}},"Connect Strava to see yours!"))}var z=a(285),Z=a.n(z),V=U.a.Title;function $(e){var t=e.done;return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t();case 3:case"end":return e.stop()}}),e)})))()}),[t]),r.a.createElement("div",{className:M()(Z.a.dataDigestion)},r.a.createElement(V,{level:3,className:"theme-color"},"Negotiating your data with Strava.."),r.a.createElement(L,{className:"top-space-medium"}))}var ee=a(99),te=a(286),ae=a.n(te),ne={5:"#E34402",4:"#E96935",3:"#EE8F67",2:"#F4B49A",1:"#F9DACC"};function re(e){var t=e.activities,a=e.effortLevel,n=e.day,c=e.disableHoverInfo;return r.a.createElement(ee.a,{mouseLeaveDelay:0,mouseEnterDelay:.05,title:c?null:"".concat(t?"".concat(t.length," activit").concat(1===t.length?"y":"ies"," of ").concat(Math.round(t.reduce((function(e,t){return e+t.distance}),0)/1e3),"kms"):"No activities"," on ").concat(n)},r.a.createElement("div",{className:M()(ae.a.node),style:{backgroundColor:ne[a>5?5:a]||"#efefef"}}))}var ce=a(287),se=a(184),le=a.n(se),oe=U.a.Text;function ie(e){var t=e.month;return r.a.createElement("div",{className:M()(le.a.monthNode)},r.a.createElement(oe,{className:M()(le.a.monthText)},t))}var ue=a(38),me=a.n(ue),fe=a(185),pe=a.n(fe),he=U.a.Text;function ve(e){var t=e.day;return r.a.createElement("div",{className:M()(pe.a.day)},r.a.createElement(he,{className:M()(pe.a.dayText)},t))}var de=a(128),ge=a.n(de),Ee=U.a.Text;function _e(){return r.a.createElement("div",{className:M()(ge.a.legend)},r.a.createElement(Ee,{className:M()(ge.a.labelText)},"Less"),r.a.createElement(re,{effortLevel:0,disableHoverInfo:!0}),r.a.createElement(re,{effortLevel:1,disableHoverInfo:!0}),r.a.createElement(re,{effortLevel:2,disableHoverInfo:!0}),r.a.createElement(re,{effortLevel:3,disableHoverInfo:!0}),r.a.createElement(re,{effortLevel:4,disableHoverInfo:!0}),r.a.createElement(re,{effortLevel:5,disableHoverInfo:!0}),r.a.createElement(Ee,{className:M()(ge.a.labelText)},"More"))}var ye=U.a.Text;function be(e){var t=e.data,a=_(),n=Object.keys(t).reverse(),c=new Date(n[0]),s=new Date,l=Array.from(Array(12)).map((function(){var e=c.toLocaleString("default",{month:"short"});return c.setMonth(c.getMonth()+1),e}));s.getDate()>14&&l.push(l[0]),s.getDate()>21&&l.shift();var o=r.a.useMemo((function(){return Object.keys(t).reduce((function(e,a){return e+(t[a].activities||[]).length}),0)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:M()(me.a.container,"top-space-medium")},r.a.createElement("div",{className:M()(me.a.userInfoContainer)},r.a.createElement(ce.a,{src:a.profile,className:M()(me.a.userAvatar)}),r.a.createElement("div",{className:M()(me.a.userBasicInfo)},r.a.createElement(ye,{strong:!0},"".concat(a.firstname," ").concat(a.lastname)),r.a.createElement(ye,{className:M()(me.a.userCity)},"".concat(a.city,", ").concat(a.country)))),r.a.createElement("div",null,r.a.createElement(ye,null,o," activities in the last year")),r.a.createElement("div",{className:M()(me.a.graphContainer)},r.a.createElement("div",{className:M()(me.a.graphSection)},r.a.createElement("div",{className:M()(me.a.dayRunner)},["Mon","Wed","Fri"].map((function(e){return r.a.createElement(ve,{day:e,key:e})}))),r.a.createElement("div",null,r.a.createElement("div",{className:M()(me.a.monthRunner),style:{padding:l.length>12?0:"0 16px"}},l.map((function(e){return r.a.createElement(ie,{month:e,key:e})}))),r.a.createElement("div",{className:M()(me.a.graph)},n.map((function(e){return r.a.createElement(re,Object.assign({},t[e],{key:e,day:e}))}))))),r.a.createElement("div",{className:M()(me.a.row)},r.a.createElement(_e,null)))))}function we(e){var t=_(),a=Object(n.useState)(null==t?1:2),c=Object(B.a)(a,2),s=c[0],l=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{step:s}),1===s&&r.a.createElement(Y,null),2===s&&r.a.createElement($,{done:function(){return l(3)}}),3===s&&r.a.createElement(be,{data:g}))}var xe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),r.a.createElement(l.a,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"".concat("/strava-github-like-graph","/auth-callback")},r.a.createElement(j,null)),r.a.createElement(o.a,{path:"".concat("/strava-github-like-graph","/init-auth")},r.a.createElement(S,null)),r.a.createElement(o.a,{path:"".concat("/strava-github-like-graph","/")},r.a.createElement(we,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(597).a({dsn:"https://7ef33f9edba24b8aad31ad5801157c48@sentry.io/2201384"}),s.a.render(r.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[292,1,2]]]);
//# sourceMappingURL=main.ff12450d.chunk.js.map